{
   "_id": "mp-fm3_ce3-test",
   "Mp": {
       "Name": "CE3",
       "Description": "calibration",
       "Standard": "CE3",
       "Exchange": {
           "DocumentsTable": {
               "Caption": {
                   "value": "Select one or more calibration doc(s)"
               },
               "DisplayAs": "documentSelect"
           },
           "DocumentsOk": {
               "DisplayAs": "okButton",
               "Ready": false,
               "Label": {
                   "value": "all docs selected"
               }
           },
           "Target_Pressure": {
               "DisplayAs": "singleSelectBox",
               "Ready": false,
               "Caption": {
                   "value": "Target pressure"
               }
           }
       },
       "Container": [
           {
               "Description": "Choose the calibration documents belinging to the calibration devices to calibrate.",
               "Ctrl": "load;run",
               "Title": "doc",
               "OnError": "error",
               "Element": [
                   "DocumentsOk",
                   "DocumentsTable"
               ],
               "Definition": [
                   [
                       {
                           "TaskName": "Common-get_list",
                           "Use": {
                               "Params": "documents"
                           },
                           "Replace": {
                               "@standard": "CE3",
                               "@listname": "select",
                               "@viewname": "calibrations",
                               "@exchangepath": "DocumentsTable.Document"
                           }
                       },
                       {
                           "TaskName": "CE3_SIG-is_ready",
                           "Replace": {
                               "@acc": "VXI11",
                               "@device": "gpib0,2",
                               "@exchpath": "CE3_SIG.Value.value",
                               "@host": "e75481"
                           }
                       },
                       {
                           "TaskName": "Common-get_list",
                           "Use": {
                               "Params": "todo"
                           }
                       }
                   ],
                   [
                       {
                           "TaskName": "CE3-run_container"
                       }
                   ]
               ]
           },
           {
               "Description": "Init.",
               "Ctrl": "unformed",
               "Title": "ini",
               "OnError": "error",
               "Element": [
                   "CE3-gas",
                   "CE3-operation_kind",
                   "CUCO-*-cal_port"
               ],
               "Definition": [
                   [
                       {
                           "TaskName": "Common-get_list",
                           "Use": {
                               "Params": "todo"
                           },
                           "Replace": {
                               "@standard": "CE3",
                               "@listname": "generate_target_select",
                               "@viewname": "todos",
                               "@exchangepath": "Target_Pressure"
                           }
                       },
                       {
                           "TaskName": "Common-update_cd"
                       }
                   ],
                   [
                       {
                           "TaskName": "exchange_element",
			   "Customer": true,
                           "Use": {
                               "Values": "cal_port"
                           },
                           "Replace": {
                               "@caption": "Calibration port of @devicename",
                               "@elemtype": "cal_port"
                           }
                       }
		   ],
		   [
                       {
                           "TaskName": "CE3-exchange_element",
                           "Use": {
                               "Values": "gas"
                           },
                           "Replace": {
                               "@devicename": "CE3"
                           },
			   "ExpandParReplace":{ 
			       "@elemtype":["gas","operation_kind"],
			       "@caption": ["Calibration Gas", "Operation Kind"]
			   },
			   "ExpandParUse":{
			       "Values":["gas","operation_kind"]
			   }
                       }
                   ],
                   [
                       {
                           "TaskName": "CE3-read_element",
                           "Replace": {
                               "@docpath": "Calibration.Measurement.SequenceControl",
			       "@devicename": "CE3"
                           },
			   "ExpandPar":{ 
			       "@elemtype":["gas","operation_kind"]
			   }
                       }
                   ],
                   [
                       {
                           "TaskName": "read_element",
			   "Customer":true,
                           "Replace": {
                               "@docpath": "Calibration.Measurement.SequenceControl",
                               "@elemtype": "cal_port"
                           }
                       }
                   ]
               ]
           },
           {
               "Description": "Measurement panel",
               "Ctrl": "ready",
               "Title": "meas",
               "OnError": "error",
               "Element": [
                   "Target_Pressure"
               ]
           }
       ],
       "Task": [
           {
               "Action": "readExchange",
               "Comment": "Reads values under the given exchange point.",
               "TaskName": "read_element",
               "DocPath": "@docpath",
               "Key": "@devicename-@elemtype"
           },
           {
               "Action": "ctrlContainer",
               "Comment": "Starts ini Container",
               "TaskName": "run_container",
               "RunIf": "DocumentsOk.Ready",
               "Value": {
                   "1": "load;run"
               }
           },
           {
               "Action": "writeExchange",
               "Comment": "Add an element to the Exchange api",
               "TaskName": "exchange_element",
               "Key": "@devicename-@elemtype",
               "Values": {
                   "cal_port": {
                       "DisplayAs": "singleSelectBox",
                       "Ready": false,
                       "Caption": {
                           "value": "@devicename",
                           "type": "string"
                       },
                       "calPort": {
                           "value": "P1",
                           "options": [
                               {
                                   "value": "P1",
                                   "display": "Port 1 (rechts)"
                               },
                               {
                                   "value": "P2",
                                   "display": "Port 2 (mitte)"
                               },
                               {
                                   "value": "P3",
                                   "display": "Port 3 (links)"
                               },
                               {
                                   "value": "P3",
                                   "display": "Port 4 (XHV)"
                               }
                           ],
                           "type": "string",
                           "save": true
                       }
                   },
                   "operation_kind": {
                       "DisplayAs": "singleSelectBox",
                       "Ready": false,
                       "Caption": {
                           "value": "Kind of operation",
                           "type": "string"
                       },
                       "operationKind": {
                           "value": "opK1",
                           "options": [
                               {
                                   "value": "opK1",
                                   "display": "UHV-KP on UHV-Correction"
                               },
                               {
                                   "value": "opK2",
                                   "display": "UHV-KP on XHV-KP on"
                               },
                               {
                                   "value": "opK3",
                                   "display": "UHV-KP on XHV-Correction"
                               },
                               {
                                   "value": "opK4",
                                   "display": "const. C Methode"
                               }
                           ],
                           "type": "string",
                           "save": true
                       }
                   },
                   "gas": {
                       "DisplayAs": "singleSelectBox",
                       "Ready": false,
                       "Caption": {
                           "value": "Calibration gas",
                           "type": "string"
                       },
                       "Gas": {
                           "value": "N2",
                           "options": [
                               {
                                   "value": "N2",
                                   "display": "Stickstoff"
                               },
                               {
                                   "value": "Ar",
                                   "display": "Argon"
                               }
                           ],
                           "type": "string",
                           "save": true
                       }
                   }
               }
           }
       ]
   }
}