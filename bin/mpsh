#!/usr/bin/env node

var _          = require("underscore")
  , ndata      = require("ndata")
  , repl       = require("repl")
  , memport    = 9000
  , prettyjson = require("prettyjson");

var context      = repl.start("ssmp > ").context;

context.mem      = ndata.createClient({port: memport});
context.defaults = require("../lib/default");
context.utils    = require("../lib/utils");
context.worker   = require("../lib/worker");

context.cb       = function(res){
  console.log(res);
}

context.ecb       = function(err, res){
  if(err){
    console.log(prettyjson.render(err));
  }else{
    console.log(prettyjson.render(res));
  }
}

console.log("whats already done:");
console.log("");
console.log("- default call back: cb defined");
console.log("- default call back with err param: ecb defined");
console.log("- lib/defaults, lib/utils and lib/worker loaded");
console.log("- ndata client available: mem");
